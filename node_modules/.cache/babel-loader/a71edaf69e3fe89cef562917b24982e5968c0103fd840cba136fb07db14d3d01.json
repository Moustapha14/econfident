{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { browserOrNode, ConsoleLogger as Logger } from '@aws-amplify/core';\nimport noop from 'lodash/noop';\n// Per https://developer.mozilla.org/en-US/docs/Web/API/Page_Visibility_API\nvar hidden;\nvar visibilityChange;\nvar isBrowser = browserOrNode().isBrowser;\nif (isBrowser && document) {\n  if (typeof document.hidden !== 'undefined') {\n    hidden = 'hidden';\n    visibilityChange = 'visibilitychange';\n  } else if (typeof document['msHidden'] !== 'undefined') {\n    hidden = 'msHidden';\n    visibilityChange = 'msvisibilitychange';\n  } else if (typeof document['webkitHidden'] !== 'undefined') {\n    hidden = 'webkitHidden';\n    visibilityChange = 'webkitvisibilitychange';\n  }\n}\nvar logger = new Logger('InAppMessagingSessionTracker');\nvar SessionTracker = /** @class */function () {\n  function SessionTracker(sessionStateChangeHandler) {\n    var _this = this;\n    if (sessionStateChangeHandler === void 0) {\n      sessionStateChangeHandler = noop;\n    }\n    this.start = function () {\n      if (isBrowser) {\n        document === null || document === void 0 ? void 0 : document.addEventListener(visibilityChange, _this.visibilityChangeHandler);\n      }\n      return _this.getSessionState();\n    };\n    this.end = function () {\n      if (isBrowser) {\n        document === null || document === void 0 ? void 0 : document.removeEventListener(visibilityChange, _this.visibilityChangeHandler);\n      }\n      return _this.getSessionState();\n    };\n    this.getSessionState = function () {\n      if (isBrowser && document && !document[hidden]) {\n        return 'started';\n      }\n      // If, for any reason, document is undefined the session will never start\n      return 'ended';\n    };\n    this.visibilityChangeHandler = function () {\n      if (!isBrowser || !document) {\n        return;\n      }\n      if (document[hidden]) {\n        logger.debug('App is now hidden');\n        _this.sessionStateChangeHandler('ended');\n      } else {\n        logger.debug('App is now visible');\n        _this.sessionStateChangeHandler('started');\n      }\n    };\n    this.sessionStateChangeHandler = sessionStateChangeHandler;\n  }\n  return SessionTracker;\n}();\nexport default SessionTracker;","map":{"version":3,"names":["browserOrNode","ConsoleLogger","Logger","noop","hidden","visibilityChange","isBrowser","document","logger","SessionTracker","sessionStateChangeHandler","_this","start","addEventListener","visibilityChangeHandler","getSessionState","end","removeEventListener","debug"],"sources":["/Users/macbook/Documents/projet ipssi/temp-repo-chatbot/frontend/node_modules/@aws-amplify/notifications/lib-esm/InAppMessaging/SessionTracker/SessionTracker.js"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { browserOrNode, ConsoleLogger as Logger } from '@aws-amplify/core';\nimport noop from 'lodash/noop';\n// Per https://developer.mozilla.org/en-US/docs/Web/API/Page_Visibility_API\nvar hidden;\nvar visibilityChange;\nvar isBrowser = browserOrNode().isBrowser;\nif (isBrowser && document) {\n    if (typeof document.hidden !== 'undefined') {\n        hidden = 'hidden';\n        visibilityChange = 'visibilitychange';\n    }\n    else if (typeof document['msHidden'] !== 'undefined') {\n        hidden = 'msHidden';\n        visibilityChange = 'msvisibilitychange';\n    }\n    else if (typeof document['webkitHidden'] !== 'undefined') {\n        hidden = 'webkitHidden';\n        visibilityChange = 'webkitvisibilitychange';\n    }\n}\nvar logger = new Logger('InAppMessagingSessionTracker');\nvar SessionTracker = /** @class */ (function () {\n    function SessionTracker(sessionStateChangeHandler) {\n        var _this = this;\n        if (sessionStateChangeHandler === void 0) { sessionStateChangeHandler = noop; }\n        this.start = function () {\n            if (isBrowser) {\n                document === null || document === void 0 ? void 0 : document.addEventListener(visibilityChange, _this.visibilityChangeHandler);\n            }\n            return _this.getSessionState();\n        };\n        this.end = function () {\n            if (isBrowser) {\n                document === null || document === void 0 ? void 0 : document.removeEventListener(visibilityChange, _this.visibilityChangeHandler);\n            }\n            return _this.getSessionState();\n        };\n        this.getSessionState = function () {\n            if (isBrowser && document && !document[hidden]) {\n                return 'started';\n            }\n            // If, for any reason, document is undefined the session will never start\n            return 'ended';\n        };\n        this.visibilityChangeHandler = function () {\n            if (!isBrowser || !document) {\n                return;\n            }\n            if (document[hidden]) {\n                logger.debug('App is now hidden');\n                _this.sessionStateChangeHandler('ended');\n            }\n            else {\n                logger.debug('App is now visible');\n                _this.sessionStateChangeHandler('started');\n            }\n        };\n        this.sessionStateChangeHandler = sessionStateChangeHandler;\n    }\n    return SessionTracker;\n}());\nexport default SessionTracker;\n//# sourceMappingURL=SessionTracker.js.map"],"mappings":"AAAA;AACA;AACA,SAASA,aAAa,EAAEC,aAAa,IAAIC,MAAM,QAAQ,mBAAmB;AAC1E,OAAOC,IAAI,MAAM,aAAa;AAC9B;AACA,IAAIC,MAAM;AACV,IAAIC,gBAAgB;AACpB,IAAIC,SAAS,GAAGN,aAAa,EAAE,CAACM,SAAS;AACzC,IAAIA,SAAS,IAAIC,QAAQ,EAAE;EACvB,IAAI,OAAOA,QAAQ,CAACH,MAAM,KAAK,WAAW,EAAE;IACxCA,MAAM,GAAG,QAAQ;IACjBC,gBAAgB,GAAG,kBAAkB;EACzC,CAAC,MACI,IAAI,OAAOE,QAAQ,CAAC,UAAU,CAAC,KAAK,WAAW,EAAE;IAClDH,MAAM,GAAG,UAAU;IACnBC,gBAAgB,GAAG,oBAAoB;EAC3C,CAAC,MACI,IAAI,OAAOE,QAAQ,CAAC,cAAc,CAAC,KAAK,WAAW,EAAE;IACtDH,MAAM,GAAG,cAAc;IACvBC,gBAAgB,GAAG,wBAAwB;EAC/C;AACJ;AACA,IAAIG,MAAM,GAAG,IAAIN,MAAM,CAAC,8BAA8B,CAAC;AACvD,IAAIO,cAAc,GAAG,aAAe,YAAY;EAC5C,SAASA,cAAcA,CAACC,yBAAyB,EAAE;IAC/C,IAAIC,KAAK,GAAG,IAAI;IAChB,IAAID,yBAAyB,KAAK,KAAK,CAAC,EAAE;MAAEA,yBAAyB,GAAGP,IAAI;IAAE;IAC9E,IAAI,CAACS,KAAK,GAAG,YAAY;MACrB,IAAIN,SAAS,EAAE;QACXC,QAAQ,KAAK,IAAI,IAAIA,QAAQ,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,QAAQ,CAACM,gBAAgB,CAACR,gBAAgB,EAAEM,KAAK,CAACG,uBAAuB,CAAC;MAClI;MACA,OAAOH,KAAK,CAACI,eAAe,EAAE;IAClC,CAAC;IACD,IAAI,CAACC,GAAG,GAAG,YAAY;MACnB,IAAIV,SAAS,EAAE;QACXC,QAAQ,KAAK,IAAI,IAAIA,QAAQ,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,QAAQ,CAACU,mBAAmB,CAACZ,gBAAgB,EAAEM,KAAK,CAACG,uBAAuB,CAAC;MACrI;MACA,OAAOH,KAAK,CAACI,eAAe,EAAE;IAClC,CAAC;IACD,IAAI,CAACA,eAAe,GAAG,YAAY;MAC/B,IAAIT,SAAS,IAAIC,QAAQ,IAAI,CAACA,QAAQ,CAACH,MAAM,CAAC,EAAE;QAC5C,OAAO,SAAS;MACpB;MACA;MACA,OAAO,OAAO;IAClB,CAAC;IACD,IAAI,CAACU,uBAAuB,GAAG,YAAY;MACvC,IAAI,CAACR,SAAS,IAAI,CAACC,QAAQ,EAAE;QACzB;MACJ;MACA,IAAIA,QAAQ,CAACH,MAAM,CAAC,EAAE;QAClBI,MAAM,CAACU,KAAK,CAAC,mBAAmB,CAAC;QACjCP,KAAK,CAACD,yBAAyB,CAAC,OAAO,CAAC;MAC5C,CAAC,MACI;QACDF,MAAM,CAACU,KAAK,CAAC,oBAAoB,CAAC;QAClCP,KAAK,CAACD,yBAAyB,CAAC,SAAS,CAAC;MAC9C;IACJ,CAAC;IACD,IAAI,CAACA,yBAAyB,GAAGA,yBAAyB;EAC9D;EACA,OAAOD,cAAc;AACzB,CAAC,EAAG;AACJ,eAAeA,cAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}