{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { getCurrTime, getByteLength, defaultConfig, isInteger } from './Utils';\nimport { ConsoleLogger as Logger } from '@aws-amplify/core';\nvar logger = new Logger('StorageCache');\n/**\n * Initialization of the cache\n *\n */\nvar StorageCache = /** @class */function () {\n  /**\n   * Initialize the cache\n   * @param config - the configuration of the cache\n   */\n  function StorageCache(config) {\n    this.config = Object.assign({}, config);\n    this.cacheCurSizeKey = this.config.keyPrefix + 'CurSize';\n    this.checkConfig();\n  }\n  StorageCache.prototype.getModuleName = function () {\n    return 'Cache';\n  };\n  StorageCache.prototype.checkConfig = function () {\n    // check configuration\n    if (!isInteger(this.config.capacityInBytes)) {\n      logger.error('Invalid parameter: capacityInBytes. It should be an Integer. Setting back to default.');\n      this.config.capacityInBytes = defaultConfig.capacityInBytes;\n    }\n    if (!isInteger(this.config.itemMaxSize)) {\n      logger.error('Invalid parameter: itemMaxSize. It should be an Integer. Setting back to default.');\n      this.config.itemMaxSize = defaultConfig.itemMaxSize;\n    }\n    if (!isInteger(this.config.defaultTTL)) {\n      logger.error('Invalid parameter: defaultTTL. It should be an Integer. Setting back to default.');\n      this.config.defaultTTL = defaultConfig.defaultTTL;\n    }\n    if (!isInteger(this.config.defaultPriority)) {\n      logger.error('Invalid parameter: defaultPriority. It should be an Integer. Setting back to default.');\n      this.config.defaultPriority = defaultConfig.defaultPriority;\n    }\n    if (this.config.itemMaxSize > this.config.capacityInBytes) {\n      logger.error('Invalid parameter: itemMaxSize. It should be smaller than capacityInBytes. Setting back to default.');\n      this.config.itemMaxSize = defaultConfig.itemMaxSize;\n    }\n    if (this.config.defaultPriority > 5 || this.config.defaultPriority < 1) {\n      logger.error('Invalid parameter: defaultPriority. It should be between 1 and 5. Setting back to default.');\n      this.config.defaultPriority = defaultConfig.defaultPriority;\n    }\n    if (Number(this.config.warningThreshold) > 1 || Number(this.config.warningThreshold) < 0) {\n      logger.error('Invalid parameter: warningThreshold. It should be between 0 and 1. Setting back to default.');\n      this.config.warningThreshold = defaultConfig.warningThreshold;\n    }\n    // set 5MB limit\n    var cacheLimit = 5 * 1024 * 1024;\n    if (this.config.capacityInBytes > cacheLimit) {\n      logger.error('Cache Capacity should be less than 5MB. Setting back to default. Setting back to default.');\n      this.config.capacityInBytes = defaultConfig.capacityInBytes;\n    }\n  };\n  /**\n   * produce a JSON object with meta-data and data value\n   * @param value - the value of the item\n   * @param options - optional, the specified meta-data\n   *\n   * @return - the item which has the meta-data and the value\n   */\n  StorageCache.prototype.fillCacheItem = function (key, value, options) {\n    var ret = {\n      key: key,\n      data: value,\n      timestamp: getCurrTime(),\n      visitedTime: getCurrTime(),\n      priority: options.priority,\n      expires: options.expires,\n      type: typeof value,\n      byteSize: 0\n    };\n    ret.byteSize = getByteLength(JSON.stringify(ret));\n    // for accurate size\n    ret.byteSize = getByteLength(JSON.stringify(ret));\n    return ret;\n  };\n  /**\n   * set cache with customized configuration\n   * @param config - customized configuration\n   *\n   * @return - the current configuration\n   */\n  StorageCache.prototype.configure = function (config) {\n    if (!config) {\n      return this.config;\n    }\n    if (config.keyPrefix) {\n      logger.warn(\"Don't try to configure keyPrefix!\");\n    }\n    this.config = Object.assign({}, this.config, config, config.Cache);\n    this.checkConfig();\n    return this.config;\n  };\n  return StorageCache;\n}();\nexport { StorageCache };","map":{"version":3,"names":["getCurrTime","getByteLength","defaultConfig","isInteger","ConsoleLogger","Logger","logger","StorageCache","config","Object","assign","cacheCurSizeKey","keyPrefix","checkConfig","prototype","getModuleName","capacityInBytes","error","itemMaxSize","defaultTTL","defaultPriority","Number","warningThreshold","cacheLimit","fillCacheItem","key","value","options","ret","data","timestamp","visitedTime","priority","expires","type","byteSize","JSON","stringify","configure","warn","Cache"],"sources":["/Users/macbook/Documents/Chatapp/temp-repo-chatbot/frontend/node_modules/@aws-amplify/cache/lib-esm/StorageCache.js"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { getCurrTime, getByteLength, defaultConfig, isInteger } from './Utils';\nimport { ConsoleLogger as Logger } from '@aws-amplify/core';\nvar logger = new Logger('StorageCache');\n/**\n * Initialization of the cache\n *\n */\nvar StorageCache = /** @class */ (function () {\n    /**\n     * Initialize the cache\n     * @param config - the configuration of the cache\n     */\n    function StorageCache(config) {\n        this.config = Object.assign({}, config);\n        this.cacheCurSizeKey = this.config.keyPrefix + 'CurSize';\n        this.checkConfig();\n    }\n    StorageCache.prototype.getModuleName = function () {\n        return 'Cache';\n    };\n    StorageCache.prototype.checkConfig = function () {\n        // check configuration\n        if (!isInteger(this.config.capacityInBytes)) {\n            logger.error('Invalid parameter: capacityInBytes. It should be an Integer. Setting back to default.');\n            this.config.capacityInBytes = defaultConfig.capacityInBytes;\n        }\n        if (!isInteger(this.config.itemMaxSize)) {\n            logger.error('Invalid parameter: itemMaxSize. It should be an Integer. Setting back to default.');\n            this.config.itemMaxSize = defaultConfig.itemMaxSize;\n        }\n        if (!isInteger(this.config.defaultTTL)) {\n            logger.error('Invalid parameter: defaultTTL. It should be an Integer. Setting back to default.');\n            this.config.defaultTTL = defaultConfig.defaultTTL;\n        }\n        if (!isInteger(this.config.defaultPriority)) {\n            logger.error('Invalid parameter: defaultPriority. It should be an Integer. Setting back to default.');\n            this.config.defaultPriority = defaultConfig.defaultPriority;\n        }\n        if (this.config.itemMaxSize > this.config.capacityInBytes) {\n            logger.error('Invalid parameter: itemMaxSize. It should be smaller than capacityInBytes. Setting back to default.');\n            this.config.itemMaxSize = defaultConfig.itemMaxSize;\n        }\n        if (this.config.defaultPriority > 5 || this.config.defaultPriority < 1) {\n            logger.error('Invalid parameter: defaultPriority. It should be between 1 and 5. Setting back to default.');\n            this.config.defaultPriority = defaultConfig.defaultPriority;\n        }\n        if (Number(this.config.warningThreshold) > 1 ||\n            Number(this.config.warningThreshold) < 0) {\n            logger.error('Invalid parameter: warningThreshold. It should be between 0 and 1. Setting back to default.');\n            this.config.warningThreshold = defaultConfig.warningThreshold;\n        }\n        // set 5MB limit\n        var cacheLimit = 5 * 1024 * 1024;\n        if (this.config.capacityInBytes > cacheLimit) {\n            logger.error('Cache Capacity should be less than 5MB. Setting back to default. Setting back to default.');\n            this.config.capacityInBytes = defaultConfig.capacityInBytes;\n        }\n    };\n    /**\n     * produce a JSON object with meta-data and data value\n     * @param value - the value of the item\n     * @param options - optional, the specified meta-data\n     *\n     * @return - the item which has the meta-data and the value\n     */\n    StorageCache.prototype.fillCacheItem = function (key, value, options) {\n        var ret = {\n            key: key,\n            data: value,\n            timestamp: getCurrTime(),\n            visitedTime: getCurrTime(),\n            priority: options.priority,\n            expires: options.expires,\n            type: typeof value,\n            byteSize: 0,\n        };\n        ret.byteSize = getByteLength(JSON.stringify(ret));\n        // for accurate size\n        ret.byteSize = getByteLength(JSON.stringify(ret));\n        return ret;\n    };\n    /**\n     * set cache with customized configuration\n     * @param config - customized configuration\n     *\n     * @return - the current configuration\n     */\n    StorageCache.prototype.configure = function (config) {\n        if (!config) {\n            return this.config;\n        }\n        if (config.keyPrefix) {\n            logger.warn(\"Don't try to configure keyPrefix!\");\n        }\n        this.config = Object.assign({}, this.config, config, config.Cache);\n        this.checkConfig();\n        return this.config;\n    };\n    return StorageCache;\n}());\nexport { StorageCache };\n//# sourceMappingURL=StorageCache.js.map"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}